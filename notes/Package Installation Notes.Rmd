---
title: "Package installation on SDC"
output: html_document
---

Issue originally with `install.packages('tidyverse')` failing. Traces back to an issue with `openssl`, a necessary package for a number of purposes, including for `aws.s3`.

SDC instance is Linux, running Redhat OS. Openssl is installed, and can check from the terminal:
```
[daniel@ip-172-18-33-183 ~]$ openssl version -a
OpenSSL 1.0.2k-fips  26 Jan 2017
built on: reproducible build, date unspecified
platform: linux-x86_64
options:  bn(64,64) md2(int) rc4(16x,int) des(idx,cisc,16,int) idea(int) blowfish(idx)
compiler: gcc -I. -I.. -I../include  -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -DKRB5_MIT -m64 -DL_ENDIAN -Wall -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wa,--noexecstack -DPURIFY -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DRC4_ASM -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM -DECP_NISTZ256_ASM
OPENSSLDIR: "/etc/pki/tls"
engines:  rdrand dynamic
```
Can also confirm with `yum info openssl`, looks good.

Ok, so we have openssl accessible in the operating system. From Installation notes for openssl:

"On Fedora, CentOS or RHEL use openssl-devel:"
```
sudo yum install openssl-devel
```

We can't do this as a user, since not in the sudo file.. can in root, in Jupyter notebook terminal:

```
ec2-user@ip-172-18-33-183 home]$ sudo yum install openssl-devel
Loaded plugins: priorities, update-motd, upgrade-helper
amzn-main                                                                                                          | 2.1 kB  00:00:00
amzn-updates                                                                                                       | 2.5 kB  00:00:00
Package 1:openssl-devel-1.0.2k-8.106.amzn1.x86_64 already installed and latest version
Nothing to do
```

But this doesn't solve the issue! 

Try installing the R package from GitHub directly! **This works**. 
Same problem with `selectr`. 

```{r eval=FALSE, echo=T}

if(length(grep("devtools", (.packages(all.available=T))))==0) install.packages("devtools", dependencies =TRUE)

devtools::install_github("jeroen/openssl")

devtools::install_github("sjp/selectr")

```

Now load the packages we want:

```{r, eval=F}

loadpacks <- c("httr", 
               "rvest", # was still failing, needed selectr also
               "aws.s3",
               "tidyverse" # do this after rvest
               )
for(i in loadpacks){if(length(grep(i, (.packages(all.available=T))))==0) install.packages(i, dependencies =TRUE)}

```


